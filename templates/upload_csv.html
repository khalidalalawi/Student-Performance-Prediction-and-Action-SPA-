
<!-- saved from url=(0111)https://www.pythonanywhere.com/user/studentPrediction/files/home/studentPrediction/51/templates/upload_csv.html -->
<html class=" jikqnehi idc0_343"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style data-emotion="css"></style></head><body data-new-gr-c-s-check-loaded="14.1088.0" data-gr-ext-installed="">{% extends "base.html" %}
{% block content %}

        <div class="container">
      <div id="pageloader">

           <img src="./upload_csv_files/loader-large.gif" alt="processing...">
           <h3 class="well">  Please wait until it finish. Do not refresh the page <br> It may take several minutes to complete  </h3>

        </div>

      <form method="POST" enctype="multipart/form-data" action="https://www.pythonanywhere.com/upload_csv" class="text-center border border-light p-5" id="myform">

            <h2>     Upload Dataset </h2> <br>

            <label for="courses">Choose a course:</label><br>
			<select name="course_course_id" id="course" required="required">
    		{% for    user in cityList %}
            <option value="{{user[0]}}" selected=""> {{user[0]}}  [{{user[1]}}]   </option>
    		{% endfor %}
            </select>
            <br><br>

            <label for="year">Choose Year:</label><br>
			<select name="year" id="year" required="required">
        	  <option value="2010">2010</option>
              <option value="2011">2011</option>
              <option value="2012">2012</option>
              <option value="2013">2013</option>
              <option value="2014">2014</option>
              <option value="2015">2015</option>
              <option value="2016">2016</option>
              <option value="2017">2017</option>
              <option value="2018">2018</option>
              <option value="2019">2019</option>
              <option value="2020">2020</option>
              <option value="2021">2021</option>
            </select>

            <br><br>

            <label for="year">Please select Semester/Trimester:</label><br>
             <input type="radio" id="Semester 1" name="semester_or_trimester" value="Semester 1" required="">
             <label for="Semester 1">  Semester 1</label><br>
             <input type="radio" id="Semester 2" name="semester_or_trimester" value="Semester 2">
             <label for="Semester 2">Semester 2</label><br>
             <input type="radio" id="Trimester 1" name="semester_or_trimester" value="Trimester 1">
             <label for="Trimester 1">Trimester 1</label><br>
             <input type="radio" id="Trimester 2" name="semester_or_trimester" value="Trimester 2">
             <label for="Trimester 2">Trimester 2</label><br>
             <input type="radio" id="Trimester 3" name="semester_or_trimester" value="Trimester 3">
             <label for="Trimester 3">Trimester 3</label><br>


            <br><br>



        	<label>Upload CSV File:</label> <br>
            <input type="file" name="file" id="defaultContactFormName" required="required" class="form-control-file"> <br>


            <a href="https://i.ibb.co/K9DGQrp/example-upload.png" target="_blank">See an example of a CSV file format</a> <br>

            <div id="show_assessments" class="well" style="width: 50%; text-align: left; margin-left: auto; margin-right: auto;">

            </div>


            <!-- Send button -->
            <button class="btn btn-info btn-block" style="width: 50%; " type="submit" name="submit" value="Upload">Upload</button> <br> <br>



        </form>

        </div>
 <script>



   ///////////////////////////////////////////////////////////////////////////////
course_select = document.getElementById('course');
div_select = document.getElementById('show_assessments');

course_select.onchange = function(){
 course = course_select.value;
 fetch('assessments/' + course).then(function(response){
  response.json().then(function(data) {
   optionHTML = '';
   //////////////////////////////////////////////////////////////////////

   check_object_results=isEmptyObject(data.assessments_course)

   if (check_object_results==true){
   optionHTML ="NO assessments created for this course, please add assessments first then upload your data";
   div_select.innerHTML =  optionHTML;

   }
   else
   {
   for (assessments of data.assessments_course) {
    optionHTML +=  assessments.assessment_name + " <b>|</b> ";
   }

   div_select.innerHTML = '<b><span>&#9432;</span> </b> ' + data.length_records_in_course +  ' records stored in the database for this course <br/><br/><b><span>&#9432;</span>  Please make sure the columns format and order of the csv file you want to upload for '+ assessments.course_course_id + ' look like this : </b> <br/>' + optionHTML + ' Total (mark out of 100) <b>|</b> Grade  </br></br> <p><span>&#9432;</span><b><i>Total column</i></b> contains total mark of all assessments out of 100  </br> <span>&#9432;</span> <b><i> Grade column</i></b> contains students final grade such as HD, D, C ..</p>';

   }
   //////////////////////////////////////////////////////////////////////





  });
 });
}


// this function is to check if there is results come from the select satement frome above function (results)
function isEmptyObject(value) {
  return Object.keys(value).length === 0;
}

// execute the function when the page loads
$(document).ready(course_select.onchange);

// this is for the spinner when click submit button
$(document).ready(function(){
  $("#myform").on("submit", function(){
    $("#pageloader").fadeIn();
  });//submit
});//document ready


</script>

<script>

// this for info button
$('.info').popover();
$(':not(#anything)').on('click', function (e) {
    $('.info').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons and other elements within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            $(this).popover('hide');
            return;
        }
    });
});

</script>
{% endblock %}<div id="7153ee90-4609-4b54-84f4-07eb29eeb05d-quickmenu"></div></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>